$(function () { $('#userpassword').textbox().textbox('addClearBtn', 'icon-clear'); $('#confirmPassword').textbox().textbox('addClearBtn', 'icon-clear'); $.extend($.fn.validatebox.defaults.rules, { equalTo: { validator: function (value, param) { return $(param[0]).val() == value }, message: '两次输入密码不一致！' } }) });$.extend($.fn.textbox.methods,{addClearBtn:function(jq,iconCls){return jq.each(function(){var t=$(this);var opts=t.textbox('options');opts.icons=opts.icons||[];opts.icons.unshift({iconCls:iconCls,handler:function(e){$(e.data.target).textbox('clear').textbox('textbox').focus();$(this).css('visibility','hidden')}});t.textbox();if(!t.textbox('getText')){t.textbox('getIcon',0).css('visibility','hidden')}t.textbox('textbox').bind('keyup',function(){var icon=t.textbox('getIcon',0);if($(this).val()){icon.css('visibility','visible')}else{icon.css('visibility','hidden')}})})}});function restpwd(){$('#setpaw_fm').form('submit',{url:'/Account/setpwd?userid='+loingid,onSubmit:function(){return $(this).form('validate')},success:function(result){result=JSON.parse(result);if(result.success==true){$.messager.show({title:'提示！',msg:result.Msg});$('#setpaw_fm').form('clear')}if(result.success==false){$.messager.show({title:'错误提示！',msg:result.Msg});$('#setpaw_dlg').dialog('close');}}});};